@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================================================
   CSS VARIABLES — Obsidian Weissach Design System
   ============================================================================ */
:root {
  --color-white: #FFFFFF;
  --color-zinc-950: #020203;
  --color-brand-cyan: #00F0FF;
  --ease-spring: cubic-bezier(0.2, 0.8, 0.2, 1);
  --vvh: 100vh;
  --kb: 0px;

  /* Mobile-first spacing (4px base) */
  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-5: 20px;
  --space-6: 24px;
  --space-8: 32px;

  /* Surface palette (never pure #000) */
  --surface-base: #09090B;
  --surface-card: #0A0A0B;
  --surface-elevated: #0C0C0D;
  --surface-subtle: #111111;

  /* Safe area fallbacks */
  --safe-top: env(safe-area-inset-top, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
  --safe-left: env(safe-area-inset-left, 0px);
  --safe-right: env(safe-area-inset-right, 0px);

  /* Bottom nav height */
  --nav-height: 72px;
}

/* ============================================================================
   BASE — Mobile-First Foundation
   ============================================================================ */
html, body {
  height: 100%;
  overflow-x: hidden;
  -webkit-text-size-adjust: 100%;
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
}

html {
  height: 100%;
  overflow-y: scroll;
  background-color: var(--surface-base);
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
  color-scheme: dark;
}

body {
  min-height: 100%;
  background-color: var(--surface-base);
  color: var(--color-white);
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  position: relative;
  margin: 0;
  overscroll-behavior-y: none;
  font-size: 16px;
  line-height: 1.4;
}

/* Prevent horizontal overflow on all elements */
* {
  max-width: 100%;
  box-sizing: border-box;
}

/* Force 16px on inputs to prevent iOS zoom */
input, textarea, select {
  font-size: 16px !important;
}

#root {
  width: 100%;
  min-height: 100dvh;
  min-height: var(--vvh, 100vh);
  display: flex;
  flex-direction: column;
  position: relative;
  overflow-x: hidden;
}

::selection {
  background-color: rgba(0, 240, 255, 0.2);
  color: #FFFFFF;
}

/* ============================================================================
   TYPOGRAPHY — Monospace Ledger System
   ============================================================================ */
.font-mono-ledger {
  font-family: 'JetBrains Mono', 'SF Mono', monospace;
  font-variant-numeric: tabular-nums;
  letter-spacing: -0.04em;
}

/* Odds numbers: minimum 18px, monospace, right-aligned */
.odds-number {
  font-family: 'JetBrains Mono', 'SF Mono', monospace;
  font-variant-numeric: tabular-nums;
  font-size: max(18px, 1.125rem);
  line-height: 1.2;
  text-align: right;
}

/* AI analysis text */
.analysis-text {
  font-size: 14px;
  color: #A0A0A0;
  line-height: 1.4;
}

/* ============================================================================
   GLASS MATERIALS — Apple-Grade Frosted Surfaces
   ============================================================================ */
.glass-material {
  background: rgba(10, 10, 12, 0.75);
  backdrop-filter: blur(25px) saturate(200%);
  -webkit-backdrop-filter: blur(25px) saturate(200%);
  border: 0.5px solid rgba(255, 255, 255, 0.08);
  box-shadow: inset 0 1px 0 0 rgba(255, 255, 255, 0.05);
}

.glass-premium {
  background: rgba(10, 10, 12, 0.85);
  backdrop-filter: blur(24px) saturate(180%);
  -webkit-backdrop-filter: blur(24px) saturate(180%);
  border-bottom: 1px solid rgba(255, 255, 255, 0.04);
  isolation: isolate;
}

/* ============================================================================
   TOUCH INTERACTIONS — Mobile Haptics
   ============================================================================ */
.press-haptic {
  transition: transform 0.1s var(--ease-spring);
}
.press-haptic:active {
  transform: scale(0.975);
}

.tap-feedback:active {
  opacity: 0.6;
  transform: scale(0.97);
  transition: all 0.1s var(--ease-spring);
}

.tap-scale:active {
  transform: scale(0.95);
  transition: transform 0.1s var(--ease-spring);
}

/* Touch target minimum: 44x44px */
.touch-target {
  min-width: 44px;
  min-height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* ============================================================================
   ANIMATIONS — Performance-Optimized (GPU Compositing)
   ============================================================================ */
.shimmer-edge {
  position: relative;
  overflow: hidden;
}
.shimmer-edge::after {
  content: "";
  position: absolute;
  top: 0;
  left: -100%;
  width: 50%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.03), transparent);
  animation: edge-shimmer 4s infinite linear;
  will-change: transform;
}

@keyframes edge-shimmer {
  to { left: 200%; }
}

@keyframes ow-breathe {
  0%, 100% { opacity: 0.4; }
  50% { opacity: 0.85; }
}

@keyframes flash-green {
  0% { background-color: transparent; }
  20% { background-color: rgba(16, 185, 129, 0.2); }
  100% { background-color: transparent; }
}

.flash-update-green {
  animation: flash-green 1.2s ease-out;
}

@keyframes pulse-subtle {
  0%, 100% { opacity: 1; text-shadow: 0 0 10px rgba(79, 70, 229, 0.1); }
  50% { opacity: 0.85; text-shadow: 0 0 20px rgba(79, 70, 229, 0.4); }
}

.animate-pulse-subtle {
  animation: pulse-subtle 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

@keyframes ticker {
  0% { transform: translateX(0); }
  100% { transform: translateX(-50%); }
}

@keyframes shimmer {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(300%); }
}

/* Network reconnecting pulse (header) */
@keyframes reconnect-pulse {
  0%, 100% { opacity: 0.3; }
  50% { opacity: 1; }
}

.reconnecting-pulse {
  animation: reconnect-pulse 2s ease-in-out infinite;
}

/* Skeleton loading shimmer */
@keyframes skeleton-shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

.skeleton {
  background: linear-gradient(90deg, rgba(255,255,255,0.03) 25%, rgba(255,255,255,0.08) 50%, rgba(255,255,255,0.03) 75%);
  background-size: 200% 100%;
  animation: skeleton-shimmer 1.5s ease-in-out infinite;
}

/* ============================================================================
   SCROLLBARS — Stealth Mode
   ============================================================================ */
::-webkit-scrollbar {
  display: none;
}

.no-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.custom-scrollbar::-webkit-scrollbar {
  display: block;
  width: 4px;
  height: 4px;
}

.custom-scrollbar::-webkit-scrollbar-track {
  background: transparent;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.15);
  border-radius: 10px;
}

/* ============================================================================
   SAFE AREA — iOS Notch & Home Bar
   ============================================================================ */
.pt-safe { padding-top: env(safe-area-inset-top); }
.pb-safe { padding-bottom: env(safe-area-inset-bottom); }
.pl-safe { padding-left: env(safe-area-inset-left); }
.pr-safe { padding-right: env(safe-area-inset-right); }
.h-safe-bottom { height: env(safe-area-inset-bottom); }
.top-safe-header { top: env(safe-area-inset-top); }

/* Unified Sticky Header (USH) */
.ush-root {
  position: sticky;
  top: 0;
  z-index: 40;
  background: rgba(10, 10, 12, 0.95);
  -webkit-backdrop-filter: blur(24px) saturate(180%);
  backdrop-filter: blur(24px) saturate(180%);
  isolation: isolate;
  margin: 0;
  width: 100%;
  padding-top: env(safe-area-inset-top, 0px);
}

@supports (-webkit-touch-callout: none) {
  .ush-root {
    transform: translateZ(0);
  }
}

/* ============================================================================
   LAYOUT UTILITIES — Mobile-First
   ============================================================================ */
.ios-card {
  border-radius: 20px;
  overflow: hidden;
}

.ios-card-sm {
  border-radius: 12px;
  overflow: hidden;
}

.bg-ios-gradient {
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0) 100%);
}

/* Bottom sheet */
.bottom-sheet {
  border-radius: 20px 20px 0 0;
  max-height: calc(100vh - env(safe-area-inset-top, 0px) - 20px);
}

/* Full-width cards on mobile */
.card-full-mobile {
  width: 100%;
  max-width: 100%;
  overflow: hidden;
}

/* ============================================================================
   MATCHUP GRID — Typography Operating System
   ============================================================================ */
.matchup-grid {
  display: grid;
  grid-template-columns: 1fr var(--col-time) var(--col-end);
  align-items: center;
  column-gap: 16px;
  padding: var(--row-py) 16px;
  width: 100%;
}

.ty-time {
  font-size: var(--fs-time);
  line-height: var(--lh-time);
  font-weight: var(--w-semi);
  letter-spacing: var(--trk-time);
  color: var(--tone-2);
  text-align: right;
  font-variant-numeric: tabular-nums;
}

.ty-team-stack {
  display: flex;
  flex-direction: column;
  gap: var(--team-gap);
  min-width: 0;
}

.ty-team-row {
  display: flex;
  align-items: center;
  gap: 12px;
  height: 24px;
}

.ty-team-name {
  font-size: var(--fs-team);
  line-height: var(--lh-team);
  font-weight: var(--w-semi);
  letter-spacing: -0.01em;
  color: var(--tone-1);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.ty-team-name.secondary {
  color: var(--tone-2);
  font-weight: var(--w-med);
}

.ty-score {
  font-size: var(--fs-team);
  line-height: var(--lh-team);
  font-weight: var(--w-semi);
  color: var(--tone-1);
  font-variant-numeric: tabular-nums;
  margin-left: auto;
}

.ty-score.secondary {
  color: var(--tone-2);
}

.ty-meta-label {
  font-size: 11px;
  line-height: 14px;
  font-weight: var(--w-semi);
  letter-spacing: var(--trk-label);
  text-transform: uppercase;
  color: var(--tone-3);
  text-align: center;
}

/* ============================================================================
   CITATION LINKS — Obsidian Grounding System
   ============================================================================ */
.cite-link {
  text-decoration: none;
  color: #71717A;
  transition: color 150ms ease-out, text-decoration-color 150ms ease-out;
}

.cite-link:hover {
  color: var(--cite-hover-color, #10B981);
  text-decoration: underline;
  text-decoration-color: var(--cite-hover-underline, rgba(16, 185, 129, 0.25));
  text-underline-offset: 3px;
  text-decoration-thickness: 1px;
}

a[href*="google.com/"]:empty,
a[href*="google.com/search"]:not([class]) { display: none; }

.hairline {
  height: 1px;
  background: linear-gradient(to right, transparent, rgba(255, 255, 255, 0.06) 15%, rgba(255, 255, 255, 0.06) 85%, transparent);
}

/* ============================================================================
   STALE DATA INDICATOR — Dims edge badge after 60s
   ============================================================================ */
.stale-indicator {
  opacity: 0.5;
  filter: saturate(0.5);
  transition: opacity 0.5s ease, filter 0.5s ease;
}

/* ============================================================================
   SMOOTH HEIGHT TRANSITION — AI Analysis Expand
   ============================================================================ */
.expand-transition {
  transition: max-height 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.2s ease;
  overflow: hidden;
}

.expand-transition.collapsed {
  max-height: 0;
  opacity: 0;
}

.expand-transition.expanded {
  max-height: 500px;
  opacity: 1;
}

/* ============================================================================
   RESPONSIVE UTILITIES
   ============================================================================ */
.pb-mobile-nav {
  padding-bottom: calc(var(--nav-height) + var(--safe-bottom) + 16px);
}
